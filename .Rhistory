install.packages("bsselectR")
devtools::install_github("walkerke/bsselectR")
devtools::install_github("walkerke/bsselectR")
devtools::install_github("walkerke/bsselectR")
install.packages("xfun")
install.packages("xfun")
install.packages("xfun")
install.packages("xfun")
install.packages("xfun")
install.packages("xfun")
install.packages("xfun")
install.packages("xfun")
install.packages("xfun")
install.packages("xfun")
install.packages("xfun")
install.packages("xfun")
,
DT::datatable(df_pcrs_espana_7d))
library(dplyr)
library(lubridate)
library(plotly)
library(dplyr)
library(lubridate)
library(plotly)
file_name <- "hospitales.csv"
file_url = "https://cnecovid.isciii.es/covid19/resources/casos_hosp_uci_def_sexo_edad_provres.csv"
if(!file.exists(file_name)) {download.file(file_url, destfile = file_name)}
# Leemos el csv y lo metemos en el marco de datos df_pcrs
df_hospitales = read.table(
file = file_name,
header = TRUE,
sep = ",",
dec = ".",
na.strings = "",
stringsAsFactors = FALSE
)
DT::datatable(head(df_hospitales,25))
# Damos formato a df_hospitales
df_hospitales$fecha = ymd(df_hospitales$fecha) # Convertimos a tipo fecha
df_hospitales = df_hospitales %>%
rename(provincia = provincia_iso,
nro_hospitalizaciones = num_hosp) %>%
group_by(provincia, fecha) %>%
mutate(nro_hospitalizaciones == sum(nro_hospitalizaciones)) %>%
arrange(provincia, fecha)
# Ponemos los nombres de los comunes ya que viene el identificador ISO
df_hospitales = df_hospitales %>%  mutate(
provincia = case_when(
provincia == "C" ~ "La Coruña",
provincia == "VI" ~ "Álava",
provincia == "AB" ~ "Albacete",
provincia == "A" ~ "Alicante",
provincia == "AL" ~ "Almería",
provincia == "O" ~ "Asturias",
provincia == "AV" ~ "Ávila",
provincia == "BA" ~ "Badajoz",
provincia == "PM" ~ "Baleares",
provincia == "B" ~ "Barcelona",
provincia == "BI" ~ "Vizcaya",
provincia == "BU" ~ "Burgos",
provincia == "CC" ~ "Cáceres",
provincia == "CA" ~ "Cádiz",
provincia == "S" ~ "Cantabria",
provincia == "CS" ~ "Castellón",
provincia == "CR" ~ "Ciudad Real",
provincia == "CO" ~ "Córdoba",
provincia == "CU" ~ "Cuenca",
provincia == "SS" ~ "Guipúzcoa",
provincia == "GI" ~ "Gerona",
provincia == "GR" ~ "Granada",
provincia == "GU" ~ "Guadalajara",
provincia == "H" ~ "Huelva",
provincia == "HU" ~ "Huesca",
provincia == "J" ~ "Jaén",
provincia == "LO" ~ "La Rioja",
provincia == "GC" ~ "Las Palmas",
provincia == "LE" ~ "León",
provincia == "L" ~ "Lérida",
provincia == "LU" ~ "Lugo",
provincia == "M" ~ "Madrid",
provincia == "MA" ~ "Málaga",
provincia == "MU" ~ "Murcia",
provincia == "NA" ~ "Navarra",
provincia == "OR" ~ "Orense",
provincia == "P" ~ "Palencia",
provincia == "PO" ~ "Pontevedra",
provincia == "SA" ~ "Salamanca",
provincia == "TF" ~ "Santa Cruz de Tenerife",
provincia == "SG" ~ "Segovia",
provincia == "SE" ~ "Sevilla",
provincia == "SO" ~ "Soria",
provincia == "T" ~ "Tarragona",
provincia == "TE" ~ "Teruel",
provincia == "TO" ~ "Toledo",
provincia == "V" ~ "Valencia",
provincia == "VA" ~ "Valladolid",
provincia == "ZA" ~ "Zamora",
provincia == "Z" ~ "Zaragoza",
provincia == "CE" ~ "Ceuta",
provincia == "ML" ~ "Melilla",
TRUE  ~ provincia)
)
DT::datatable(head(df_hospitales,25))
# Leemos el csv y lo metemos en el marco de datos df_pcrs
df_hospitales = read.table(
file = file_name,
header = TRUE,
sep = ",",
dec = ".",
na.strings = "",
stringsAsFactors = FALSE
)
# Damos formato a df_hospitales
df_hospitales$fecha = ymd(df_hospitales$fecha) # Convertimos a tipo fecha
df_hospitales = df_hospitales %>%
rename(provincia = provincia_iso,
nro_hospitalizaciones = num_hosp) %>%
group_by(provincia, fecha) %>%
mutate(nro_hospitalizaciones == sum(nro_hospitalizaciones)) %>%
arrange(provincia, fecha)
DT::datatable(head(df_hospitales,25))
# Ponemos los nombres de los comunes ya que viene el identificador ISO
df_hospitales = df_hospitales %>%  mutate(
provincia = case_when(
provincia == "C" ~ "La Coruña",
provincia == "VI" ~ "Álava",
provincia == "AB" ~ "Albacete",
provincia == "A" ~ "Alicante",
provincia == "AL" ~ "Almería",
provincia == "O" ~ "Asturias",
provincia == "AV" ~ "Ávila",
provincia == "BA" ~ "Badajoz",
provincia == "PM" ~ "Baleares",
provincia == "B" ~ "Barcelona",
provincia == "BI" ~ "Vizcaya",
provincia == "BU" ~ "Burgos",
provincia == "CC" ~ "Cáceres",
provincia == "CA" ~ "Cádiz",
provincia == "S" ~ "Cantabria",
provincia == "CS" ~ "Castellón",
provincia == "CR" ~ "Ciudad Real",
provincia == "CO" ~ "Córdoba",
provincia == "CU" ~ "Cuenca",
provincia == "SS" ~ "Guipúzcoa",
provincia == "GI" ~ "Gerona",
provincia == "GR" ~ "Granada",
provincia == "GU" ~ "Guadalajara",
provincia == "H" ~ "Huelva",
provincia == "HU" ~ "Huesca",
provincia == "J" ~ "Jaén",
provincia == "LO" ~ "La Rioja",
provincia == "GC" ~ "Las Palmas",
provincia == "LE" ~ "León",
provincia == "L" ~ "Lérida",
provincia == "LU" ~ "Lugo",
provincia == "M" ~ "Madrid",
provincia == "MA" ~ "Málaga",
provincia == "MU" ~ "Murcia",
provincia == "NA" ~ "Navarra",
provincia == "OR" ~ "Orense",
provincia == "P" ~ "Palencia",
provincia == "PO" ~ "Pontevedra",
provincia == "SA" ~ "Salamanca",
provincia == "TF" ~ "Santa Cruz de Tenerife",
provincia == "SG" ~ "Segovia",
provincia == "SE" ~ "Sevilla",
provincia == "SO" ~ "Soria",
provincia == "T" ~ "Tarragona",
provincia == "TE" ~ "Teruel",
provincia == "TO" ~ "Toledo",
provincia == "V" ~ "Valencia",
provincia == "VA" ~ "Valladolid",
provincia == "ZA" ~ "Zamora",
provincia == "Z" ~ "Zaragoza",
provincia == "CE" ~ "Ceuta",
provincia == "ML" ~ "Melilla",
TRUE  ~ provincia)
)
source('C:/_DOCUMENTOS_FJNM/Programacion/R/Rmarkdown_websites/Covid/_pruebas.R', encoding = 'UTF-8')
source('C:/_DOCUMENTOS_FJNM/Programacion/R/Rmarkdown_websites/Covid/_pruebas.R')
source('C:/_DOCUMENTOS_FJNM/Programacion/R/Rmarkdown_websites/Covid/_pruebas.R', encoding = 'UTF-8')
source('C:/_DOCUMENTOS_FJNM/Programacion/R/Rmarkdown_websites/Covid/_pruebas.R', encoding = 'UTF-8')
source('C:/_DOCUMENTOS_FJNM/Programacion/R/Rmarkdown_websites/Covid/_pruebas.R', encoding = 'UTF-8')
